<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
 <ui:composition template="/WEB-INF/include/template.xhtml">
    <ui:define name="head">
        <title>Hello JSF Bootstrap</title>
        <!-- Custom styles for this template -->
        <h:outputStylesheet name="css/starter-template.css"/>
    </ui:define>
    <ui:define name="body">
 <div class="row">
<div class=" col col-md"></div>
<div class="col-10 col-md8">

    <h3>Listado de consulta de rifas</h3>
    <p:link value="Agregar" class="btn btn-primary float-md-left"  outcome="insrifa"/><br/><br/>
         
    <h:form>
        <p:dataTable value="#{rifaBean.rifas}" var="a" tableStyleClass="table table-bordered table-striped" style="margin-top: 40px;">
           <p:column headerText="Usuarios" class="filters">
               <h:outputText value="#{a.idUsuarios.nombUsu}"/>
           </p:column>
           <p:column headerText="Boleteria">
               <h:outputText value="#{a.idBoleteria.precio}"  class="filters"/>
           </p:column>
           <p:column headerText="Premios">
               <h:outputText value="#{a.premio}"  class="filters"/>
           </p:column>
            
              <p:column headerText="Elimina">
                  <h:commandLink  action="#{rifaBean.elimina(a.idRifa)}" class="btn btn-success">Eliminar</h:commandLink>
                     </p:column>
                     
               <p:column headerText="Editar">
               <h:commandLink  action="#{rifaBean.consulta(a.idRifa)}" class="btn btn-danger">Editar</h:commandLink>
                  </p:column>

            
              <p:column headerText="Rifar">
                  <h:commandLink  action="#{rifaBean.rifar()}" class="btn btn-success">Rifar</h:commandLink>
                  </p:column>

            
            
       </p:dataTable>
    </h:form>  
    
    <c:if test="${not empty rifaBean.winerfinal}">
            <div class="col col-md">
                <p>
                    Parece que tenemos un ganador!!!!
                </p>
                <h2>El ganador es!!! <b>${rifaBean.winerfinal.idUsuarios.nombUsu}</b></h2>
                    <p>
                        <a href="https://www.efectyvirtual.com:20009/PortalEcommerce/Account/Login" class="btn btn-success">Cobrar premio</a>
                    </p>
            </div>
            </c:if>
    
</div>
<div class="col col-md"></div>
</div>
    </ui:define>
  </ui:composition> 
    
 
</html>
